/* ===== Main Shell (global page layout under the header) ===== */
.shell{
  --shell-max: 1200px;
  --gap: 20px;
  --header-h: 72px;            /* keep this in sync with your header */

  max-width: var(--shell-max);
  margin: 0 auto;
  padding: 16px 20px 24px;

  display: grid;
  grid-template-columns: 280px 1fr;   /* desktop: sidebar + feed */
  gap: var(--gap);
}

/* Left column (sidebar) */
.sidebar{
  min-width: 240px;
  max-width: 300px;
  display: grid;
  align-content: start;
  gap: 12px;
}

/* Right column (feed) */
.feed{
  min-width: 0;                     /* prevent overflow */
  display: grid;
  gap: 16px;
}

/* ============================
   Generic helpers (light default)
============================ */
.card{
  background:#fff;
  color:#111;
  border:1px solid #E9E9E9;
  border-radius:12px;
  padding:16px;
}

/* Simple sectioned nav (legacy) */
.side-nav{ display:grid; gap:6px; }
.side-nav a{
  padding:10px 12px;
  border-radius:10px;
  color:#111;
  text-decoration:none;
  background:#f6f6f6;
  border:1px solid #eee;
}
.side-nav a:hover{ background:#efefef; }
.side-nav a.active{ background:#eaeaea; border:1px solid #ddd; }

/* Tags (light) */
.tags{ display:flex; flex-wrap:wrap; gap:8px; }
.tag{
  padding:6px 10px; border-radius:999px;
  background:#F2F2F2; border:1px solid #E6E6E6; color:#333;
  text-decoration:none; font-size:13px;
}

/* ============================
   Desktop (≥861px)
============================ */
@media (min-width: 861px){
  /* Normal desktop: two columns */
  .shell{ grid-template-columns: 280px 1fr; }
  .sidebar{ position: sticky; top: var(--header-h,72px); transform: none; }

  /* NEW: collapsed mode on desktop (hide sidebar, expand feed) */
  .shell.sidebar-collapsed{
    grid-template-columns: 1fr;   /* full-width feed */
  }
  .shell.sidebar-collapsed .sidebar{
    display: none;                 /* hide the sidebar entirely */
  }

  /* REMOVE any overlay/backdrop you previously added for desktop */
  /* (Make sure you delete rules like .shell.sidebar-open::before {...}) */
}

/* ---- Mobile slide-in sidebar (unchanged) ---- */
@media (max-width: 860px){
  .shell{ grid-template-columns: 1fr; }

  .sidebar{
    position: fixed;
    top: var(--header-h,72px); left: 0; bottom: 0;
    width: 78%; max-width: 320px;
    background:#fff; border-right:1px solid #E9E9E9;
    padding:16px;
    transform: translateX(-100%);
    transition: transform .25s ease;
    z-index:1002; overflow-y:auto;
  }
  .dark .sidebar{ background:#141414; border-color:#262626; }

  /* Slide in when open on mobile */
  .shell.sidebar-open .sidebar{ transform: translateX(0); }

  /* Prevent background scroll when open on mobile only */
  .shell.sidebar-open{ overflow: hidden; }
}


/* ---- Sidebar components (modern) ---- */

/* Card (signup card centered) */
.sb-card{
  background:#fff; color:#111;
  border:1px solid #E9E9E9; border-radius:12px;
  padding:16px; box-shadow:0 1px 0 rgba(0,0,0,.04);
  overflow:hidden;
  text-align:center;
}
.sb-card h3{ margin:0 0 8px; font-size:18px; }
.sb-card p{ margin:0 0 14px; color:#666; }

/* Sidebar CTA — contained pill */
.sidebar .sb-cta{
  display:block;
  width:100%;
  box-sizing:border-box;
  margin:0;
  padding:12px 18px;
  border-radius:999px;
  background:#2f7fff;
  color:#fff;
  text-decoration:none;
  font-weight:700;
  text-align:center;
  border:0;
  position:static;
}
.sidebar .sb-cta:hover{ filter:brightness(1.1); }

/* Section nav */
.sb-nav{ margin-top:12px; display:grid; gap:6px; }
.sb-link{
  display:flex; align-items:center; gap:10px;
  padding:10px 12px; border-radius:8px; color:#222; text-decoration:none;
  background:#F5F6F7; border:1px solid #DADDE1;
}
.sb-link .sb-ico{ width:22px; text-align:center; }
.sb-link.active{ background:#E7E9ED; border-color:#C9CDD3; font-weight:700; }
.sb-link:hover{ background:#ECEEF1; }

/* Group header */
.sb-group{ margin-top:14px; }
.sb-group h4{
  margin:8px 0; color:#9a9a9a; font-size:13px; font-weight:700;
}

/* Interests list */
.sb-list{ list-style:none; margin:0; padding:0; display:grid; gap:4px; }
.sb-item{
  display:grid; grid-template-columns: 32px 1fr 20px; align-items:center;
  gap:10px; padding:8px 10px; border-radius:8px; text-decoration:none;
  color:#222; background:#fff; border:1px solid #DADDE1;
}
.sb-item:hover{ background:#F7F8FA; }
.sb-item:focus-visible{
  outline:2px solid #2f7fff; outline-offset:2px; border-radius:8px;
}
.sb-chip{
  --c:#ccc;
  width:28px; height:28px; border-radius:6px;
  display:grid; place-items:center;
  background:var(--c); color:#fff; font-size:16px; line-height:1;
}
.sb-pin{ color:#cfcfcf; font-size:16px; justify-self:end; }

/* ============================
   Dark-mode overrides
============================ */
.dark .card{ background:#151515; color:#eaeaea; border-color:#262626; }

.dark .side-nav a{
  color:#eaeaea; background:#1a1a1a; border-color:#242424;
}
.dark .side-nav a:hover{ background:#202020; }
.dark .side-nav a.active{ background:#202020; border-color:#2a2a2a; }

.dark .tag{
  background:#1e1e1e; border-color:#2b2b2b; color:#dcdcdc;
}

.dark .sb-card{ background:#151515; color:#eaeaea; border-color:#262626; }
.dark .sb-card p{ color:#b8b8b8; }
.dark .sb-link{ background:#1a1a1a; border-color:#2a2a2a; color:#EAEAEA; }
.dark .sb-link.active{ background:#202020; border-color:#343a40; }
.dark .sb-item{ background:#141414; border-color:#2a2a2a; color:#EAEAEA; }
.dark .sb-item:hover{ background:#191919; }
.dark .sb-pin{ color:#7c7c7c; }
